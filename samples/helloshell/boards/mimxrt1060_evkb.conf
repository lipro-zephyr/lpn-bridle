# Copyright (c) 2024 TiaC Systems
# SPDX-License-Identifier: Apache-2.0
#
# NOTES for further utilization and realization
#
# In this configuration artefact the following Kconfig symbols
# were set explicitly to the current upstream defaults to realize
# a reasonably comprehensible condition:
#
# CONFIG_POLL
# CONFIG_CAN_INIT_PRIORITY
# CONFIG_CAN_MAX_FILTER
#
#
# Possible mode flags on CAN Shell command (capabilities):
# ========================================================
#
# fd			: CAN_MODE_FD
# listen-only		: CAN_MODE_LISTENONLY
# loopback		: CAN_MODE_LOOPBACK
# normal		: CAN_MODE_NORMAL
# one-shot		: CAN_MODE_ONE_SHOT	(not on FLEXCAN)
# triple-sampling	: CAN_MODE_3_SAMPLES
#
#
# Used CAN Shell commands for CAN setup and probes:
# =================================================
#
# can show can@401d8000
#
# can bitrate can@401d8000 500000 800 1
# can dbitrate can@401d8000 5000000 750 1
# can mode can@401d8000 normal
#
# can start can@401d8000
#
# CAN 11-bit and 29-bit ID number 5 receiving:
# --------------------------------------------
# can filter add can@401d8000 5
# can filter add can@401d8000 -e 5
#
# CAN 11-bit and 29-bit ID:
# -------------------------
# can send can@401d8000 0 11 22 33 44
# can send can@401d8000 -e 0 11 22 33 44
#
# can stop can@401d8000
#
#
# Used CAN Shell commands for CAN FD setup and probes:
# ====================================================
#
# can show can@401d8000
#
# can bitrate can@401d8000 500000 800 1
# can dbitrate can@401d8000 5000000 750 1
# can mode can@401d8000 fd
#
# can start can@401d8000
#
# CAN 11-bit and 29-bit ID number 5 receiving:
# --------------------------------------------
# can filter add can@401d8000 5
# can filter add can@401d8000 -e 5
#
# CAN 11-bit and 29-bit ID:
# -------------------------
# can send can@401d8000 0 11 22 33 44
# can send can@401d8000 -e 0 11 22 33 44
#
# CAN FD 11-bit and 29-bit ID w/o and w/ BRS:
# -------------------------------------------
# can send can@401d8000 -f 0 11 22 33 44
# can send can@401d8000 -f -b 0 11 22 33 44
# can send can@401d8000 -e -f 0 11 22 33 44
# can send can@401d8000 -e -f -b 0 11 22 33 44
#
# can stop can@401d8000
#
#
# Linux setup and commands for CAN and CAN FD Socket:
# ===================================================
#
# sudo ip link set can0 up type can \
#      bitrate 500000 sample-point 0.800 \
#      dbitrate 5000000 dsample-point 0.750 \
#      restart-ms 1000 berr-reporting on fd on
# sudo ifconfig can0 txqueuelen 65536
# ip -details -statistics link show can0
#
# sudo ip link set can1 up type can \
#      bitrate 500000 sample-point 0.800 \
#      dbitrate 5000000 dsample-point 0.750 \
#      restart-ms 1000 berr-reporting on fd on
# sudo ifconfig can1 txqueuelen 65536
# ip -details -statistics link show can1
#
# candump -cc -ta -a -dex can0
#
# cansend can1 005#11.22.33.44
# cansend can1 00000005#11.22.33.44
#
# cansend can1 005##311223344
# cansend can1 00000005##311223344
#

# enable Async I/O Framework explicitly
CONFIG_POLL=y

# enable CAN support with CAN FD capability
CONFIG_CAN=y
CONFIG_CAN_FD_MODE=y
CONFIG_CAN_INIT_PRIORITY=80
CONFIG_CAN_MAX_FILTER=5

# enable Shell with CAN commands
CONFIG_SHELL=y
CONFIG_CAN_SHELL=y
CONFIG_DEVICE_SHELL=y

# enable Statistics for CAN with Shell commands
CONFIG_STATS=y
CONFIG_STATS_NAMES=y
CONFIG_STATS_SHELL=y
CONFIG_CAN_STATS=y
